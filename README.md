Навык умного дома Яндекс.Алиса для управления ресиверами Yamaha.
===================

В данный момент поддерживаются ресиверы: RX-V473, RX-V573, RX-V575, RX-V673, RX-V773. 
Возможна работа других ресиверов серии RX, которые поддерживает библиотека https://github.com/wuub/rxv.

Навык позволяет Алисе:
* Включать и выключать ресивер
* Переключать источник сигнала
* Регулировать громкость
* Отключать и включать звук (mute)

Необходимо для функционирования:
-----------------
1. Разместить данный веб-сервис в локальной сети с ресивером Yamaha.
2. Предоставить доступ к данному веб-сервису из сети Интернет (или подсети Яндекс)
3. Зарегистрировать новый приватный навык в Яндекс.Диалоги https://dialogs.yandex.ru/developer
4. Зарегистрировать приложение в Яндекс.Oauth https://oauth.yandex.ru/

Установка приложения
-------
TODO: добавить описание. 

Конфигурирование
-----
Конфигурация задается параметрами, указанными в конфигурационном файле `$HOME/.alice-yamaha-skill.yml`
 в формате yaml
1. Установка источников сигнала.
 
   Алиса поддерживает только 10 источников сигнала, причем они не могут быть проименованы.
   При обращении к Алисе можно использовать только порядковые номера.
   Для удобства использования можно назначить источникам удобные порядковые номера. Пример:
   ```yaml
   input_map:
     one: HDMI1
     two: HDMI2
     three: AV1
     four: AV2
   ```
2. Ограничение прав доступа к навыку

   В конфигурационном файле можно указать email'ы пользователей, которым доступно использование навыка. 
   Пример
   
   ```yaml
   users:
     - email@yandex.ru
   ```
   
3. Установка лимитов громкости

   В конфигурационном файле можно указать пороговые значения громкости, которые не могут быть превышены.
   Пример:
   ```yaml
    volume_limit:
       min: -80
       max: -20
   ```
   
Регистрация навыка
----------
Для регистрации навыка необходимо добавить новый диалог на странице 
[Яндекс Диалоги](https://dialogs.yandex.ru/developer) с типом "Умный дом".
Необходимо заполнить все требуемые поля. Наиболее важное поле - Backend.
В нем нужно выбрать "Endpoint URL" и указать адрес, на который будут выполняться запросы.
Он должен быть вида `https://your.home.domain/alice`, где `your.home.domain` - адрес 
вашего хоста, на котором запущен данный сервис.
Для того, чтобы начать пользоваться навыком, его не обязательно публиковать. Он может оставаться черновиком сколь 
угодно долго. Единственное условие - диалог должен быть создан в том же аккаунте, который подключен 
к устройству с Алисой.


Регистрация приложения и связка аккаунтов
----------------
см. https://github.com/mokaton/wild-alice/blob/master/alice-oauth2-account-associate.md

 
